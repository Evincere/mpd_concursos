<div class="postulaciones-container">
  <app-search-header
    title="Mis Postulaciones"
    icon="file-alt"
    placeholder="Ingrese término de búsqueda"
    (search)="onSearch($event)"
    (filter)="onFilter()">
  </app-search-header>

  <div class="content">
    <mat-progress-spinner 
      *ngIf="loading"
      mode="indeterminate"
      diameter="40"
      class="loading-spinner">
    </mat-progress-spinner>

    <div class="postulaciones-list" *ngIf="!loading && postulaciones.length > 0">
      <div class="postulacion-item" *ngFor="let postulacion of postulaciones">
        <div class="postulacion-info">
          <h3>{{ postulacion.contest?.title || 'Sin título' }}</h3>
          <p class="cargo">{{ postulacion.contest?.position || 'Cargo no especificado' }}</p>
          <p class="dependencia">{{ postulacion.contest?.department || 'Dependencia no especificada' }}</p>
          <div class="meta-info">
            <span>
              <i class="fas fa-calendar-alt"></i>
              Postulado el: {{ postulacion.inscriptionDate | date:'dd/MM/yyyy' }}
            </span>
            <span>
              <i class="fas fa-clock"></i>
              Estado: {{ getEstadoPostulacionLabel(postulacion.status) }}
            </span>
          </div>
        </div>
        <button mat-stroked-button color="primary" [routerLink]="['/postulaciones', postulacion.id]" class="details-button mat-mdc-outlined-button">
          <span class="mdc-button__ripple"></span>
          <span class="mat-mdc-focus-indicator"></span>
          <span class="mat-ripple mat-mdc-button-ripple"></span>
          <span class="mat-mdc-button-touch-target"></span>
          <span class="mdc-button__label">
            <i class="fas fa-search-plus"></i>
            Ver detalles
          </span>
        </button>
      </div>
    </div>

    <div class="no-postulaciones" *ngIf="!loading && postulaciones.length === 0">
      <i class="fas fa-folder-open"></i>
      <p>No tienes postulaciones activas en este momento</p>
      <button mat-raised-button color="primary" routerLink="/concursos">
        <i class="fas fa-search"></i>
        Explorar Concursos
      </button>
    </div>
  </div>
</div>
