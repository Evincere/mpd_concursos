                        <!-- Restaurando el spinner original -->
                        <div *ngIf="isLoading" class="loading-indicator">
                            <mat-spinner diameter="40"></mat-spinner>
                            <span>Procesando...</span>
                        </div>

<!-- Secci贸n de Fechas -->
<div class="cv-section" [formGroup]="perfilForm">
    <div class="cv-section-header">
        <h2>Fechas</h2>
        <button mat-mini-fab color="primary" (click)="agregarFecha()" [disabled]="isLoading">
            <mat-icon>add</mat-icon>
        </button>
                                </div>

    <div formArrayName="fechas">
        <div *ngFor="let fecha of fechas.controls; let i = index" [formGroupName]="i" class="cv-item">
            <!-- Campos base -->
                            <div class="form-row">
                                        <mat-form-field appearance="outline">
                    <mat-label>Fecha</mat-label>
                    <input matInput [matDatepicker]="fechaPicker" formControlName="fecha">
                    <mat-datepicker-toggle matSuffix [for]="fechaPicker"></mat-datepicker-toggle>
                    <mat-datepicker #fechaPicker></mat-datepicker>
                    <mat-error *ngIf="fecha.get('fecha')?.errors?.['required']">
                                                Este campo es requerido
                                            </mat-error>
                                        </mat-form-field>

                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Descripci贸n</mat-label>
                    <input matInput formControlName="descripcion" placeholder="Ingrese descripci贸n">
                    <mat-error *ngIf="fecha.get('descripcion')?.errors?.['required']">
                                                Este campo es requerido
                                            </mat-error>
                                        </mat-form-field>
                                    </div>

            <!-- Botones de acci贸n -->
            <div class="form-row actions">
                <button mat-icon-button color="warn" (click)="eliminarFecha(i)" matTooltip="Eliminar">
                    <mat-icon>delete</mat-icon>
                                                        </button>
                <button mat-icon-button color="primary" (click)="cargarDocumentoFecha(i)" matTooltip="Cargar documento">
                    <mat-icon>upload_file</mat-icon>
                                                        </button>
                <button mat-icon-button color="primary" (click)="verDocumentoFecha(i)"
                        [disabled]="!fecha.get('documentoId')?.value" matTooltip="Ver documento">
                    <mat-icon>visibility</mat-icon>
                                                </button>
                <button mat-icon-button color="warn" (click)="eliminarDocumentoFecha(i)"
                        [disabled]="!fecha.get('documentoId')?.value" matTooltip="Eliminar documento">
                    <mat-icon>delete_forever</mat-icon>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
</div>
